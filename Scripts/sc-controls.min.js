(function(){function n(n,t){this.player=n;this.controls=t;this.controls.addClass("playControls__wrapper")}$.fn.soundCloudControls=function(t,i){i===undefined&&(i="#FF4800");var r=SC.Widget(t);return this.each(function(){var t=new n(r,$(this));r.bind(SC.Widget.Events.READY,function(){t.init(i)})})};n.prototype.init=function(n){var t=this,i=$("<div>").addClass("playControls__controls"),r;this.prevControl=$("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__previous").text("Skip to previous");this.playControl=$("<button>").addClass("playControl").addClass("playControls__icon").addClass("sc-ir").text("Play current");this.nextControl=$("<button>").addClass("skipControl").addClass("playControls__icon").addClass("sc-ir").addClass("skipControl__next").text("Skip to next");this.volumeControl=$("<button>").addClass("volume__button").addClass("volume__speakerIcon").addClass("sc-ir").text("Toggle mute");this.slider=$("<div>").addClass("slider");i.append(this.prevControl);i.append(this.playControl);i.append(this.nextControl);i.append(this.volumeControl);i.append(this.slider);this.controls.append(i);this.unmutedVolume=.5;window.localStorage&&(r=window.localStorage.getItem("SCControlsVol"),r!==null&&(this.unmutedVolume=Number(r)/100));this.setVolume(this.unmutedVolume);this.player.bind(SC.Widget.Events.PLAY,function(){t.playControl.addClass("playing").text("Pause current")});this.player.bind(SC.Widget.Events.PAUSE,function(){t.playControl.removeClass("playing").text("Play current")});this.prevControl.click(function(){t.goBack()});this.playControl.click(function(){t.togglePlay()});this.nextControl.click(function(){t.goForward()});this.volumeControl.click(function(){t.toggleMute()});this.slider.slider({range:"min",value:this.unmutedVolume*100,min:0,max:100,create:function(){$(this).find(".ui-slider-range").css("background",n)},slide:function(n,i){t.setVolume(i.value/100)},change:function(n,t){window.localStorage&&window.localStorage.setItem("SCControlsVol",t.value)}})};n.prototype.setVolume=function(n){this.player.setVolume(n);n===0?this.volumeControl.addClass("muted"):this.volumeControl.removeClass("muted");this.volumeControl.attr("data-level",Math.ceil(n*10))};n.prototype.togglePlay=function(){this.player.toggle()};n.prototype.goBack=function(){var n=this;this.player.getPosition(function(t){n.player.seekTo(0);t<3e3&&n.player.prev()})};n.prototype.goForward=function(){this.player.next()};n.prototype.toggleMute=function(){var n=this;this.player.getVolume(function(t){t===0?(n.setVolume(n.unmutedVolume),n.slider.slider("value",n.unmutedVolume*100)):(n.unmutedVolume=t,n.setVolume(0),n.slider.slider("value",0))})}})();
//# sourceMappingURL=sc-controls.min.js.map
